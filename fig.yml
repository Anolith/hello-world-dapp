compilers:
  image: eris/compilers

ipfs:
  image: eris/ipfs

  ports:
    - "4001:4001"
    - "8080:8080"

# Create a Hello World instance for creating the blockain.
helloworldmaster:
  build: .
  links:
   - compilers
   - ipfs

  ports:
   # for debugging
   - "3000:3000"

  environment:
   - CONTAINERS=true

# Create a Hello World instance for writing data.
helloworldwrite:
  build: .
  links:
   - compilers
   - ipfs
   - helloworldmaster

  ports:
   # for debugging
   - "3001:3000"

  environment:
   - CONTAINERS=true
   - BLOCKCHAIN_ID
   - ROOT_CONTRACT
   - REMOTE_HOST

# Create a Hello World instance for reading data.
helloworldread:
  build: .
  links:
   - compilers
   - ipfs
   - helloworldmaster

  ports:
   # for debugging
   - "3002:3000"

  environment:
   - CONTAINERS=true
   - BLOCKCHAIN_ID
   - ROOT_CONTRACT
   - REMOTE_HOST

seleniumhub:
  image: selenium/hub
  expose:
   - "4444"

seleniumnode:
  image: selenium/node-chrome
#  image: selenium/node-chrome-debug
  links:
   - seleniumhub:hub
   - helloworldwrite
   - helloworldread

  # Attach VNC to this port for debugging.  The password is 'secret'.
  ports:
   - "5900:5900"

helloworldtest:
  build: test
  links:
   - seleniumhub:selenium
